this.lightvue=this.lightvue||{},this.lightvue.dropdown=function(e,t,i,o){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=n(i),s=n(o),r={name:"LvDropdown",inheritAttrs:!1,mixins:[t.trueValueMixin,t.optionsMixin],emits:["before-show","before-hide","show","hide","change","filter"],components:{LvInput:s.default},props:{scrollHeight:{type:String,default:"200px"},filter:Boolean,filterPlaceholder:String,filterLocale:String,editable:{type:Boolean,default:!1},placeholder:String,disabled:Boolean,inputId:String,tabindex:String,iconRight:String,ariaLabelledBy:null,appendTo:{type:String,default:null},emptyFilterMessage:{type:String,default:"No results found"},closeOnResize:{type:Boolean,default:!1}},data:()=>({focused:!1,filterValue:null,overlayVisible:!1}),outsideClickListener:null,scrollHandler:null,resizeListener:null,beforeDestroy(){this.onBeforeUnmount()},beforeUnmount(){this.onBeforeUnmount()},methods:{getSelectedOption(){let t;if(null!=this.modelValue&&this.options)for(let i of this.options)if(e.ObjectUtils.equals(this.modelValue,this.getOptionValue(i),this.equalityKey)){t=i;break}return t},getSelectedOptionIndex(){let t=-1;if(null!=this.modelValue&&this.visibleOptions)for(let i=0;i<this.visibleOptions.length;i++)if(e.ObjectUtils.equals(this.modelValue,this.getOptionValue(this.visibleOptions[i]),this.equalityKey)){t=i;break}return t},show(){this.$emit("before-show"),this.overlayVisible=!0},hide(){this.$emit("before-hide"),this.overlayVisible=!1},onFocus(){this.focused=!0},onBlur(){this.focused=!1},onKeyDown(e){switch(e.which){case 40:this.onDownKey(e);break;case 38:this.onUpKey(e);break;case 32:this.overlayVisible||(this.show(),e.preventDefault());break;case 13:case 27:this.overlayVisible&&(this.hide(),e.preventDefault());break;case 9:this.hide()}},onFilterKeyDown(e){switch(e.which){case 40:this.onDownKey(e);break;case 38:this.onUpKey(e);break;case 13:case 27:this.overlayVisible=!1,e.preventDefault()}},onDownKey(e){if(this.visibleOptions)if(!this.overlayVisible&&e.altKey)this.show();else{let t=this.findNextOption(this.getSelectedOptionIndex());t&&this.updateModel(e,this.getOptionValue(t))}e.preventDefault()},onUpKey(e){if(this.visibleOptions){let t=this.findPrevOption(this.getSelectedOptionIndex());t&&this.updateModel(e,this.getOptionValue(t))}e.preventDefault()},findNextOption(e){let t=e+1;if(t===this.visibleOptions.length)return null;let i=this.visibleOptions[t];return this.isOptionDisabled(i)?this.findNextOption(t):i},findPrevOption(e){let t=e-1;if(t<0)return null;let i=this.visibleOptions[t];return this.isOptionDisabled(i)?this.findPrevOption(t):i},onClick(e){this.disabled||this.$refs.overlayRef&&this.$refs.overlayRef.contains(e.target)||(this.overlayVisible?this.hide():this.show(),this.$refs.focusInput.focus(),this.$refs.mainInput&&this.$refs.mainInput.$el.querySelector("input").focus())},onOptionSelect(e,t){let i=this.getOptionValue(t);this.updateModel(e,i),this.$refs.focusInput.focus(),this.$refs.mainInput&&this.$refs.mainInput.$el.querySelector("input").focus(),setTimeout((()=>{this.hide()}),200)},onEditableInput(e){this.filterValue=e||"",this.updateValue(e)},onOverlayEnter(){this.$refs.overlayRef.style.zIndex=String(e.DomHandler.generateZIndex()),this.appendContainer(),this.alignOverlay(),this.bindOutsideClickListener(),this.bindScrollListener(),this.closeOnResize&&this.bindResizeListener(),this.filter&&this.$refs.filterInput.$el.querySelector("input").focus(),this.$emit("show")},onOverlayLeave(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.closeOnResize&&this.unbindResizeListener(),this.$emit("hide")},alignOverlay(){if(this.appendTo)e.DomHandler.absolutePosition(this.$refs.overlayRef,this.$el),this.$refs.overlayRef.style.minWidth=e.DomHandler.getOuterWidth(this.$el)+"px";else{let t=this.$refs.mainInput.$el,i=null;for(let e of t.childNodes)if("lv-input__field"===e.className){i=e;break}e.DomHandler.relativePosition(this.$refs.overlayRef,t,i)}},updateModel(e,t){this.updateValue(t),this.$emit("change",{originalEvent:e,value:t})},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.overlayVisible&&this.$refs.overlayRef&&!this.$el.contains(e.target)&&!this.$refs.overlayRef.contains(e.target)&&this.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener(){this.scrollHandler||(this.scrollHandler=new e.ConnectedOverlayScrollHandler(this.$refs.container,(()=>{this.overlayVisible&&this.hide()}))),this.scrollHandler.bindScrollListener()},unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&this.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.$refs.overlayRef):document.getElementById(this.appendTo).appendChild(this.$refs.overlayRef))},restoreAppend(){this.$refs.overlayRef&&this.appendTo&&("body"===this.appendTo?document.body.removeChild(this.$refs.overlayRef):document.getElementById(this.appendTo).removeChild(this.$refs.overlayRef))},onFilterChange(e){this.$emit("filter",{originalEvent:e,value:e.target.value}),this.overlayVisible&&this.alignOverlay()},onBeforeUnmount(){this.restoreAppend(),this.unbindOutsideClickListener(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}},computed:{modelValue(){return this.$attrs.modelValue?this.$attrs.modelValue:this.value},visibleOptions(){return this.filterValue&&this.filterValue.trim().length>0?this.options.filter((e=>this.getOptionLabel(e).toLocaleLowerCase(this.filterLocale).indexOf(this.filterValue.toLocaleLowerCase(this.filterLocale))>-1)):this.options},containerClass(){return["lv-dropdown lv-component",{"--disabled":this.disabled,"--focused":this.focused,"--filled":this.modelValue}]},labelClass(){return["lv-dropdown__label",{"--as-placeholder":this.selectedLabel===this.placeholder,"lv-dropdown__label-empty":!this.$slots.value&&("--empty-label"===this.selectedLabel||0===this.selectedLabel.length)}]},selectedLabel(){let e=this.getSelectedOption();return e?this.getOptionLabel(e):this.placeholder||"--empty-label"},editableInputValue(){let e=this.getSelectedOption();return e?this.getOptionLabel(e):this.modelValue}},directives:{ripple:l.default}};function a(e,t,i,o,n,l,s,r,a,d){"boolean"!=typeof s&&(a=r,r=s,s=!1);const p="function"==typeof i?i.options:i;let c;if(e&&e.render&&(p.render=e.render,p.staticRenderFns=e.staticRenderFns,p._compiled=!0,n&&(p.functional=!0)),o&&(p._scopeId=o),l?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(l)},p._ssrRegister=c):t&&(c=s?function(e){t.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,r(e))}),c)if(p.functional){const e=p.render;p.render=function(t,i){return c.call(i),e(t,i)}}else{const e=p.beforeCreate;p.beforeCreate=e?[].concat(e,c):[c]}return i}const d="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function p(e){return(e,t)=>function(e,t){const i=d?t.media||"default":e,o=h[i]||(h[i]={ids:new Set,styles:[]});if(!o.ids.has(e)){o.ids.add(e);let i=t.source;if(t.map&&(i+="\n/*# sourceURL="+t.map.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),o.element||(o.element=document.createElement("style"),o.element.type="text/css",t.media&&o.element.setAttribute("media",t.media),void 0===c&&(c=document.head||document.getElementsByTagName("head")[0]),c.appendChild(o.element)),"styleSheet"in o.element)o.styles.push(i),o.element.styleSheet.cssText=o.styles.filter(Boolean).join("\n");else{const e=o.ids.size-1,t=document.createTextNode(i),n=o.element.childNodes;n[e]&&o.element.removeChild(n[e]),n.length?o.element.insertBefore(t,n[e]):o.element.appendChild(t)}}}(e,t)}let c;const h={};return a({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"container",class:e.containerClass,on:{click:function(t){return e.onClick(t)}}},[i("div",{staticClass:"lv-hidden-accessible"},[i("input",{ref:"focusInput",attrs:{type:"text",id:e.inputId,readonly:"",disabled:e.disabled,tabindex:e.tabindex,"aria-haspopup":"listbox","aria-expanded":e.overlayVisible,"aria-labelledby":e.ariaLabelledBy},on:{focus:e.onFocus,blur:e.onBlur,keydown:e.onKeyDown}})]),e._v(" "),i("lv-input",e._b({ref:"mainInput",attrs:{type:"text",disabled:e.disabled,placeholder:e.placeholder,"aria-haspopup":"listbox","aria-expanded":e.overlayVisible,editable:e.editable,modelValue:e.editableInputValue,value:e.editableInputValue,autocomplete:"cc-csc","icon-right":e.iconRight||"light-icon-chevron-down"},on:{focus:e.onFocus,blur:e.onBlur,"update:modelValue":e.onEditableInput,keydown:e.onKeyDown}},"lv-input",e.$attrs,!1),[e.editable?e._e():i("span",{class:e.labelClass},[e._t("value",[e._v("\n        "+e._s(e.selectedLabel)+"\n      ")],{value:e.modelValue,placeholder:e.placeholder})],2)]),e._v(" "),i("transition",{attrs:{name:"lv-transition__overlay"},on:{enter:e.onOverlayEnter,leave:e.onOverlayLeave}},[e.overlayVisible?i("div",{ref:"overlayRef",staticClass:"lv-dropdown__panel lv-component"},[e.filter?i("div",{staticClass:"lv-dropdown__panel-header"},[i("lv-input",e._b({ref:"filterInput",attrs:{type:"text",autofocus:"",autoComplete:"off","icon-right":"light-icon-search",placeholder:e.filterPlaceholder},on:{keydown:e.onFilterKeyDown,"input-native":e.onFilterChange,click:function(e){e.stopPropagation()}},model:{value:e.filterValue,callback:function(t){e.filterValue=t},expression:"filterValue"}},"lv-input",e.$attrs,!1))],1):e._e(),e._v(" "),i("div",{staticClass:"lv-dropdown__items-wrap",style:{"max-height":e.scrollHeight}},[i("ul",{staticClass:"lv-dropdown__items",attrs:{role:"listbox"}},[e._l(e.visibleOptions,(function(t,o){return i("li",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.getOptionRenderKey(t),class:["lv-dropdown__item",{"--selected":e.isOptionSelected(t),"--disabled":e.isOptionDisabled(t)}],attrs:{"aria-label":e.getOptionLabel(t),role:"option","aria-selected":e.isOptionSelected(t)},on:{click:function(i){return e.onOptionSelect(i,t)}}},[e._t("option",[e._v("\n              "+e._s(e.getOptionLabel(t))+"\n            ")],{option:t,index:o})],2)})),e._v(" "),e.filterValue&&(!e.visibleOptions||e.visibleOptions&&0===e.visibleOptions.length)?i("li",{staticClass:"lv-dropdown__empty-message"},[e._v(e._s(e.emptyFilterMessage))]):e._e()],2)])]):e._e()])],1)},staticRenderFns:[]},(function(e){e&&e("data-v-2abf9f1e_0",{source:".lv-dropdown{cursor:pointer;position:relative;user-select:none}.lv-dropdown.--disabled{opacity:.6}.lv-dropdown:not(.--disabled).--focused{outline:0 none;outline-offset:0}.lv-dropdown .lv-dropdown__label{background:0 0;border:0 none;display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;text-overflow:ellipsis;cursor:pointer}.lv-dropdown .lv-dropdown__label.--as-placeholder{color:#6c757d;max-width:13rem}.lv-dropdown .lv-dropdown__label:enabled:focus{outline:0 none;box-shadow:none}.lv-dropdown .lv-dropdown__label-empty{overflow:hidden;visibility:hidden}.lv-dropdown .lv-dropdown__trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0;background:0 0;color:#6c757d;width:2.357rem;border-top-right-radius:3px;border-bottom-right-radius:3px}.lv-dropdown .lv-dropdown__clear-icon{position:absolute;top:50%;margin-top:-.5rem;color:#6c757d;right:2.357rem}.lv-dropdown.--error,.lv-dropdown.--invalid{border-color:#f44336}.lv-dropdown__panel{min-width:100%;position:absolute;background:#fff;color:#495057;border:0 none;border-radius:3px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.lv-dropdown__panel .lv-dropdown__panel-header{padding:1rem;border-bottom:0 none;color:#495057;background:#f8f9fa;margin:0;border-top-right-radius:3px;border-top-left-radius:3px}.lv-dropdown__panel .lv-dropdown__items-wrap{overflow:auto}.lv-dropdown__panel .lv-dropdown__items{margin:0;padding:0;list-style-type:none;padding:.5rem 0}.lv-dropdown__panel .lv-dropdown__items .lv-dropdown__item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden;margin:0;padding:.5rem 1rem;border:0 none;color:#495057;background:0 0;transition:box-shadow .2s;border-radius:0}.lv-dropdown__panel .lv-dropdown__items .lv-dropdown__item.--selected{color:#fff;background:#38b2ac}.lv-dropdown__panel .lv-dropdown__items .lv-dropdown__item.--disabled{opacity:.6}.lv-dropdown__panel .lv-dropdown__items .lv-dropdown__item:not(.--selected):not(.--disabled):hover{color:#495057;background:#e9ecef}.lv-dropdown__panel .lv-dropdown__items .lv-dropdown__empty-message{padding:.429rem .857rem;color:#5b5b5b;background:0 0}.lv-input-filled .lv-dropdown{background:#edf2f7}.lv-input-filled .lv-dropdown:not(.--disabled):hover{background-color:#f8f9fa}.lv-input-filled .lv-dropdown:not(.--disabled).--focused{background-color:#fff}input.lv-dropdown__label{cursor:default}.lv-fluid .lv-dropdown{display:flex}.lv-hidden-accessible{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.lv-hidden-accessible input,.lv-hidden-accessible select{transform:scale(0)}.lv-transition__overlay{opacity:0;transform:scaleY(.8);transition:transform .12s cubic-bezier(0,0,.2,1),opacity .12s cubic-bezier(0,0,.2,1)}.lv-transition__overlay-visible{opacity:1;transform:scaleY(1)}.lv-transition__overlay-hidden{opacity:0;transform:scaleY(1);transition:opacity .1s linear}.lv-transition__overlay-enter{opacity:0;transform:scaleY(.8)}.lv-transition__overlay-leave-to{opacity:0}.lv-transition__overlay-enter-active{transition:transform .12s cubic-bezier(0,0,.2,1),opacity .12s cubic-bezier(0,0,.2,1)}.lv-transition__overlay-leave-active{transition:opacity .1s linear}",map:void 0,media:void 0})}),r,undefined,false,undefined,!1,p,void 0,void 0)}(lightvue.utils,lightvue.mixins,lightvue.ripple,lightvue.input);
