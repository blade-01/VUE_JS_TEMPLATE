import{DomHandler as e,uniqueComponentId as t}from"lightvue/utils";import l from"lightvue/ripple";import{trueValueMixin as o,preventBrowserBackMixin as i}from"lightvue/mixins";var a={inheritAttrs:!1,mixins:[o,i],emits:["hide","show","close"],props:{header:null,footer:null,modal:{type:Boolean,default:!0},contentStyle:null,rtl:Boolean,maximizable:Boolean,closable:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},baseZIndex:{type:Number,default:1e3},autoZIndex:{type:Boolean,default:!0},ariaCloseLabel:{type:String,default:"close"},position:{type:String,default:"center"}},data(){return{dialogClasses:null,dialogStyles:null,maskVisible:this.modelValue,maximized:!1}},documentKeydownListener:null,updated(){this.removeStylesFromMask(),this.modelValue&&!this.maskVisible&&(this.maskVisible=!0),this.modal&&this.$refs.mask&&!e.hasClass(this.$refs.mask,"lv-component-overlay")&&e.addClass(this.$refs.mask,"lv-component-overlay")},mounted(){this.removeStylesFromMask()},beforeDestroy(){this.disableDocumentSettings()},watch:{modelValue(e){!0===e?this.preventPopstate():this.manuallyClosePopstate()}},methods:{close(){this.$emit("close"),this.updateValue(!1)},onBeforeEnter(t){this.autoZIndex&&(t.style.zIndex=String(this.baseZIndex+e.generateZIndex()))},onEnter(){this.$refs.mask.style.zIndex=String(parseInt(this.$refs.dialog.style.zIndex,10)-1),this.$emit("show"),this.focus(),this.enableDocumentSettings()},onBeforeLeave(){e.addClass(this.$refs.mask,"lv-dialog-mask-leave")},onLeave(){this.$emit("hide")},onAfterLeave(){this.maskVisible=!1,this.disableDocumentSettings()},onAppear(){this.modelValue&&this.onEnter()},focus(){let e=this.$refs.dialog.querySelector("[autofocus]");e&&e.focus()},maximize(){this.maximized=!this.maximized,this.modal||(this.maximized?e.addClass(document.body,"lv-overflow-hidden"):e.removeClass(document.body,"lv-overflow-hidden"))},enableDocumentSettings(){this.modal?(e.addClass(document.body,"lv-overflow-hidden"),this.bindDocumentKeydownListener()):this.maximizable&&this.maximized&&e.addClass(document.body,"lv-overflow-hidden")},disableDocumentSettings(){this.modal?(e.removeClass(document.body,"lv-overflow-hidden"),this.unbindDocumentKeydownListener()):this.maximizable&&this.maximized&&e.removeClass(document.body,"lv-overflow-hidden")},onKeyDown(t){if(9===t.which){t.preventDefault();let l=e.getFocusableElements(this.$refs.dialog);if(l&&l.length>0)if(document.activeElement){let e=l.indexOf(document.activeElement);t.shiftKey?-1==e||0===e?l[l.length-1].focus():l[e-1].focus():-1==e||e===l.length-1?l[0].focus():l[e+1].focus()}else l[0].focus()}},bindDocumentKeydownListener(){this.documentKeydownListener||(this.documentKeydownListener=this.onKeyDown.bind(this),window.document.addEventListener("keydown",this.documentKeydownListener))},unbindDocumentKeydownListener(){this.documentKeydownListener&&(window.document.removeEventListener("keydown",this.documentKeydownListener),this.documentKeydownListener=null)},getPositionClass(){const e=["left","right","top","topleft","topright","bottom","bottomleft","bottomright"].find((e=>e===this.position));return e?`lv-dialog-${e}`:""},removeStylesFromMask(){this.$refs.mask&&(this.dialogStyles=this.$attrs.style?this.$attrs.style:this.$vnode.data?this.$vnode.data.style:"",this.dialogStyles&&Object.keys(this.dialogStyles).forEach((e=>{this.$refs.mask.style[e]=""})),this.dialogClasses=this.$attrs.class?this.$attrs.class:this.$vnode?this.$vnode.data.class:this.$attrs.staticClass?this.$attrs.staticClass:this.$vnode?this.$vnode.data.staticClass:"",this.dialogClasses&&(this.$refs.mask.classList="lv-dialog-mask"+(this.modal&&" lv-component-overlay ")+this.getPositionClass()))}},computed:{listeners(){return{...this.$listeners}},maskClass(){return["lv-dialog-mask",this.getPositionClass()]},dialogClass(){return["lv-dialog lv-component",{"lv-dialog-rtl":this.rtl,"lv-dialog-maximized":this.maximizable&&this.maximized},this.dialogClasses]},maximizeIconClass(){return["lv-dialog-header-maximize-icon",{"light-icon-arrows-maximize":!this.maximized,"light-icon-arrows-minimize":this.maximized}]},dialogStyle(){return this.dialogStyles},ariaId:()=>t(),ariaLabelledById(){return null!=this.header?this.ariaId+"_header":null}},directives:{ripple:l}};function s(e,t,l,o,i,a,s,n,d,r){"boolean"!=typeof s&&(d=n,n=s,s=!1);const v="function"==typeof l?l.options:l;let g;if(e&&e.render&&(v.render=e.render,v.staticRenderFns=e.staticRenderFns,v._compiled=!0,i&&(v.functional=!0)),o&&(v._scopeId=o),a?(g=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,d(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},v._ssrRegister=g):t&&(g=s?function(e){t.call(this,r(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,n(e))}),g)if(v.functional){const e=v.render;v.render=function(t,l){return g.call(l),e(t,l)}}else{const e=v.beforeCreate;v.beforeCreate=e?[].concat(e,g):[g]}return l}const n="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function d(e){return(e,t)=>function(e,t){const l=n?t.media||"default":e,o=v[l]||(v[l]={ids:new Set,styles:[]});if(!o.ids.has(e)){o.ids.add(e);let l=t.source;if(t.map&&(l+="\n/*# sourceURL="+t.map.sources[0]+" */",l+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),o.element||(o.element=document.createElement("style"),o.element.type="text/css",t.media&&o.element.setAttribute("media",t.media),void 0===r&&(r=document.head||document.getElementsByTagName("head")[0]),r.appendChild(o.element)),"styleSheet"in o.element)o.styles.push(l),o.element.styleSheet.cssText=o.styles.filter(Boolean).join("\n");else{const e=o.ids.size-1,t=document.createTextNode(l),i=o.element.childNodes;i[e]&&o.element.removeChild(i[e]),i.length?o.element.insertBefore(t,i[e]):o.element.appendChild(t)}}}(e,t)}let r;const v={};const g=s({render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return e.maskVisible?l("div",{ref:"mask",class:e.maskClass,on:{click:function(t){e.closable&&e.close()}}},[l("transition",{attrs:{name:"lv-dialog"},on:{"before-enter":e.onBeforeEnter,enter:e.onEnter,"before-leave":e.onBeforeLeave,leave:e.onLeave,"after-leave":e.onAfterLeave,appear:e.onAppear}},[e.modelValue?l("div",e._g(e._b({ref:"dialog",class:e.dialogClass,style:e.dialogStyle,attrs:{role:"dialog","aria-labelledby":e.ariaLabelledById,"aria-modal":e.modal},on:{click:function(e){e.stopPropagation()}}},"div",e.$attrs,!1),e.listeners),[e.showHeader?l("div",{staticClass:"lv-dialog-header"},[e._t("header",[e.header?l("span",{staticClass:"lv-dialog-title",attrs:{id:e.ariaLabelledById}},[e._v(e._s(e.header))]):e._e()]),e._v(" "),l("div",{staticClass:"lv-dialog-header-icons"},[e.maximizable?l("LvButton",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"lv-dialog-header-icon lv-dialog-header-maximize lv-link",attrs:{type:"button",tabindex:"-1"},on:{click:e.maximize}},[l("span",{class:e.maximizeIconClass})]):e._e(),e._v(" "),e.closable?l("LvButton",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"lv-dialog-header-icon lv-dialog-header-close lv-link",attrs:{"aria-label":e.ariaCloseLabel,type:"button",tabindex:"-1"},on:{click:e.close}},[l("span",{staticClass:"lv-dialog-header-close-icon light-icon-x"})]):e._e()],1)],2):e._e(),e._v(" "),l("div",{staticClass:"lv-dialog-content",style:e.contentStyle},[e._t("default")],2),e._v(" "),e.footer||e.$slots.footer?l("div",{staticClass:"lv-dialog-footer"},[e._t("footer",[e._v(e._s(e.footer))])],2):e._e()]):e._e()])],1):e._e()},staticRenderFns:[]},(function(e){e&&e("data-v-fb5410ee_0",{source:'.lv-dialog{border-radius:3px;box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12);border:0 none}.lv-dialog .lv-dialog-header{border-bottom:0 none;background:#fff;color:#495057;padding:1.5rem;border-top-right-radius:3px;border-top-left-radius:3px}.lv-dialog .lv-dialog-header .lv-dialog-title{font-weight:600;font-size:1.25rem}.lv-dialog .lv-dialog-header .lv-dialog-header-icon{width:2rem;height:2rem;color:#6c757d;border:0 none;background:0 0;border-radius:50%;transition:background-color .2s,color .2s,box-shadow .2s;margin-right:.5rem}.lv-dialog .lv-dialog-header .lv-dialog-header-icon:enabled:hover{color:#495057;border-color:transparent;background:#e9ecef}.lv-dialog .lv-dialog-header .lv-dialog-header-icon:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2rem #a6d5fa}.lv-dialog .lv-dialog-header .lv-dialog-header-icon:last-child{margin-right:0}.lv-dialog .lv-dialog-content{background:#fff;color:#495057;padding:0 1.5rem 2rem 1.5rem}.lv-dialog .lv-dialog-footer{border-top:0 none;background:#fff;color:#495057;padding:0 1.5rem 1.5rem 1.5rem;text-align:right;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.lv-dialog .lv-dialog-footer button{margin:0 .5rem 0 0;width:auto}.lv-dialog-mask.lv-component-overlay{background-color:rgba(0,0,0,.4)}.lv-link{font-size:1rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";border-radius:3px}.lv-link:focus{outline:0 none;outline-offset:0}.lv-component-overlay{background-color:rgba(0,0,0,.4);transition-duration:.2s}.lv-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none;background-color:transparent;transition-property:background-color;z-index:1000}.lv-dialog-mask.lv-component-overlay{pointer-events:auto}.lv-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1)}.lv-dialog-content{overflow-y:auto}.lv-dialog-header{display:flex;align-items:center;justify-content:space-between}.lv-dialog-title{list-style:1}.lv-dialog .lv-dialog-header-icons{display:flex;align-items:center}.lv-dialog .lv-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.lv-fluid .lv-dialog-footer .lv-button{width:auto}.lv-dialog-enter-active{transition:all 150ms cubic-bezier(0,0,.2,1)}.lv-dialog-leave-active{transition:all 150ms cubic-bezier(.4,0,.2,1)}.lv-dialog-enter,.lv-dialog-leave-to{opacity:0;transform:scale(.7)}.lv-dialog-mask.lv-dialog-mask-leave{background-color:transparent}.lv-dialog-bottom .lv-dialog,.lv-dialog-bottomleft .lv-dialog,.lv-dialog-bottomright .lv-dialog,.lv-dialog-left .lv-dialog,.lv-dialog-right .lv-dialog,.lv-dialog-top .lv-dialog,.lv-dialog-topleft .lv-dialog,.lv-dialog-topright .lv-dialog{margin:.75rem;transform:translate3d(0,0,0)}.lv-dialog-bottom .lv-dialog-enter-active,.lv-dialog-bottom .lv-dialog-leave-active,.lv-dialog-bottomleft .lv-dialog-enter-active,.lv-dialog-bottomleft .lv-dialog-leave-active,.lv-dialog-bottomright .lv-dialog-enter-active,.lv-dialog-bottomright .lv-dialog-leave-active,.lv-dialog-left .lv-dialog-enter-active,.lv-dialog-left .lv-dialog-leave-active,.lv-dialog-right .lv-dialog-enter-active,.lv-dialog-right .lv-dialog-leave-active,.lv-dialog-top .lv-dialog-enter-active,.lv-dialog-top .lv-dialog-leave-active,.lv-dialog-topleft .lv-dialog-enter-active,.lv-dialog-topleft .lv-dialog-leave-active,.lv-dialog-topright .lv-dialog-enter-active,.lv-dialog-topright .lv-dialog-leave-active{transition:all .3s ease-out}.lv-dialog-top .lv-dialog-enter,.lv-dialog-top .lv-dialog-leave-to{transform:translate3d(0,-100%,0)}.lv-dialog-bottom .lv-dialog-enter,.lv-dialog-bottom .lv-dialog-leave-to{transform:translate3d(0,100%,0)}.lv-dialog-bottomleft .lv-dialog-enter,.lv-dialog-bottomleft .lv-dialog-leave-to,.lv-dialog-left .lv-dialog-enter,.lv-dialog-left .lv-dialog-leave-to,.lv-dialog-topleft .lv-dialog-enter,.lv-dialog-topleft .lv-dialog-leave-to{transform:translate3d(-100%,0,0)}.lv-dialog-bottomright .lv-dialog-enter,.lv-dialog-bottomright .lv-dialog-leave-to,.lv-dialog-right .lv-dialog-enter,.lv-dialog-right .lv-dialog-leave-to,.lv-dialog-topright .lv-dialog-enter,.lv-dialog-topright .lv-dialog-leave-to{transform:translate3d(100%,0,0)}.lv-dialog-maximized{-webkit-transition:none;transition:none;transform:none;width:100vw!important;max-height:100%;height:100%}.lv-dialog-maximized .lv-dialog-content{flex-grow:1}.lv-dialog-left{justify-content:flex-start}.lv-dialog-right{justify-content:flex-end}.lv-dialog-top{align-items:flex-start}.lv-dialog-topleft{justify-content:flex-start;align-items:flex-start}.lv-dialog-topright{justify-content:flex-end;align-items:flex-start}.lv-dialog-bottom{align-items:flex-end}.lv-dialog-bottomleft{justify-content:flex-start;align-items:flex-end}.lv-dialog-bottomright{justify-content:flex-end;align-items:flex-end}',map:void 0,media:void 0})}),a,undefined,false,undefined,!1,d,void 0,void 0);export default g;
