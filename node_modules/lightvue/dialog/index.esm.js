import{DomHandler as e,uniqueComponentId as l}from"lightvue/utils";import t from"lightvue/ripple";import{trueValueMixin as o,preventBrowserBackMixin as n}from"lightvue/mixins";import{resolveComponent as i,resolveDirective as a,openBlock as d,createBlock as s,createVNode as r,Transition as v,withCtx as g,mergeProps as m,toHandlers as c,withModifiers as h,renderSlot as f,toDisplayString as u,createCommentVNode as p,withDirectives as b,createTextVNode as y}from"vue";var x={inheritAttrs:!1,mixins:[o,n],emits:["hide","show","close"],props:{header:null,footer:null,modal:{type:Boolean,default:!0},contentStyle:null,rtl:Boolean,maximizable:Boolean,closable:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},baseZIndex:{type:Number,default:1e3},autoZIndex:{type:Boolean,default:!0},ariaCloseLabel:{type:String,default:"close"},position:{type:String,default:"center"}},data(){return{dialogClasses:null,dialogStyles:null,maskVisible:this.modelValue,maximized:!1}},documentKeydownListener:null,updated(){this.removeStylesFromMask(),this.modelValue&&!this.maskVisible&&(this.maskVisible=!0),this.modal&&this.$refs.mask&&!e.hasClass(this.$refs.mask,"lv-component-overlay")&&e.addClass(this.$refs.mask,"lv-component-overlay")},mounted(){this.removeStylesFromMask()},beforeDestroy(){this.disableDocumentSettings()},watch:{modelValue(e){!0===e?this.preventPopstate():this.manuallyClosePopstate()}},methods:{close(){this.$emit("close"),this.updateValue(!1)},onBeforeEnter(l){this.autoZIndex&&(l.style.zIndex=String(this.baseZIndex+e.generateZIndex()))},onEnter(){this.$refs.mask.style.zIndex=String(parseInt(this.$refs.dialog.style.zIndex,10)-1),this.$emit("show"),this.focus(),this.enableDocumentSettings()},onBeforeLeave(){e.addClass(this.$refs.mask,"lv-dialog-mask-leave")},onLeave(){this.$emit("hide")},onAfterLeave(){this.maskVisible=!1,this.disableDocumentSettings()},onAppear(){this.modelValue&&this.onEnter()},focus(){let e=this.$refs.dialog.querySelector("[autofocus]");e&&e.focus()},maximize(){this.maximized=!this.maximized,this.modal||(this.maximized?e.addClass(document.body,"lv-overflow-hidden"):e.removeClass(document.body,"lv-overflow-hidden"))},enableDocumentSettings(){this.modal?(e.addClass(document.body,"lv-overflow-hidden"),this.bindDocumentKeydownListener()):this.maximizable&&this.maximized&&e.addClass(document.body,"lv-overflow-hidden")},disableDocumentSettings(){this.modal?(e.removeClass(document.body,"lv-overflow-hidden"),this.unbindDocumentKeydownListener()):this.maximizable&&this.maximized&&e.removeClass(document.body,"lv-overflow-hidden")},onKeyDown(l){if(9===l.which){l.preventDefault();let t=e.getFocusableElements(this.$refs.dialog);if(t&&t.length>0)if(document.activeElement){let e=t.indexOf(document.activeElement);l.shiftKey?-1==e||0===e?t[t.length-1].focus():t[e-1].focus():-1==e||e===t.length-1?t[0].focus():t[e+1].focus()}else t[0].focus()}},bindDocumentKeydownListener(){this.documentKeydownListener||(this.documentKeydownListener=this.onKeyDown.bind(this),window.document.addEventListener("keydown",this.documentKeydownListener))},unbindDocumentKeydownListener(){this.documentKeydownListener&&(window.document.removeEventListener("keydown",this.documentKeydownListener),this.documentKeydownListener=null)},getPositionClass(){const e=["left","right","top","topleft","topright","bottom","bottomleft","bottomright"].find((e=>e===this.position));return e?`lv-dialog-${e}`:""},removeStylesFromMask(){this.$refs.mask&&(this.dialogStyles=this.$attrs.style?this.$attrs.style:this.$vnode.data?this.$vnode.data.style:"",this.dialogStyles&&Object.keys(this.dialogStyles).forEach((e=>{this.$refs.mask.style[e]=""})),this.dialogClasses=this.$attrs.class?this.$attrs.class:this.$vnode?this.$vnode.data.class:this.$attrs.staticClass?this.$attrs.staticClass:this.$vnode?this.$vnode.data.staticClass:"",this.dialogClasses&&(this.$refs.mask.classList="lv-dialog-mask"+(this.modal&&" lv-component-overlay ")+this.getPositionClass()))}},computed:{listeners(){return{...this.$listeners}},maskClass(){return["lv-dialog-mask",this.getPositionClass()]},dialogClass(){return["lv-dialog lv-component",{"lv-dialog-rtl":this.rtl,"lv-dialog-maximized":this.maximizable&&this.maximized},this.dialogClasses]},maximizeIconClass(){return["lv-dialog-header-maximize-icon",{"light-icon-arrows-maximize":!this.maximized,"light-icon-arrows-minimize":this.maximized}]},dialogStyle(){return this.dialogStyles},ariaId:()=>l(),ariaLabelledById(){return null!=this.header?this.ariaId+"_header":null}},directives:{ripple:t}};const k={key:0,class:"lv-dialog-header"},w={class:"lv-dialog-header-icons"},C=r("span",{class:"lv-dialog-header-close-icon light-icon-x"},null,-1),z={key:1,class:"lv-dialog-footer"};!function(e,l){void 0===l&&(l={});var t=l.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===t&&o.firstChild?o.insertBefore(n,o.firstChild):o.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(".lv-dialog {\n  border-radius: 3px;\n  box-shadow: 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);\n  border: 0 none; }\n\n.lv-dialog .lv-dialog-header {\n  border-bottom: 0 none;\n  background: #ffffff;\n  color: #495057;\n  padding: 1.5rem;\n  border-top-right-radius: 3px;\n  border-top-left-radius: 3px; }\n\n.lv-dialog .lv-dialog-header .lv-dialog-title {\n  font-weight: 600;\n  font-size: 1.25rem; }\n\n.lv-dialog .lv-dialog-header .lv-dialog-header-icon {\n  width: 2rem;\n  height: 2rem;\n  color: #6c757d;\n  border: 0 none;\n  background: transparent;\n  border-radius: 50%;\n  transition: background-color 0.2s, color 0.2s, box-shadow 0.2s;\n  margin-right: 0.5rem; }\n\n.lv-dialog .lv-dialog-header .lv-dialog-header-icon:enabled:hover {\n  color: #495057;\n  border-color: transparent;\n  background: #e9ecef; }\n\n.lv-dialog .lv-dialog-header .lv-dialog-header-icon:focus {\n  outline: 0 none;\n  outline-offset: 0;\n  box-shadow: 0 0 0 0.2rem #a6d5fa; }\n\n.lv-dialog .lv-dialog-header .lv-dialog-header-icon:last-child {\n  margin-right: 0; }\n\n.lv-dialog .lv-dialog-content {\n  background: #ffffff;\n  color: #495057;\n  padding: 0 1.5rem 2rem 1.5rem; }\n\n.lv-dialog .lv-dialog-footer {\n  border-top: 0 none;\n  background: #ffffff;\n  color: #495057;\n  padding: 0 1.5rem 1.5rem 1.5rem;\n  text-align: right;\n  border-bottom-right-radius: 3px;\n  border-bottom-left-radius: 3px; }\n\n.lv-dialog .lv-dialog-footer button {\n  margin: 0 0.5rem 0 0;\n  width: auto; }\n\n.lv-dialog-mask.lv-component-overlay {\n  background-color: rgba(0, 0, 0, 0.4); }\n\n.lv-link {\n  font-size: 1rem;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n  border-radius: 3px; }\n\n.lv-link:focus {\n  outline: 0 none;\n  outline-offset: 0;\n  /* box-shadow: 0 0 0 0.2rem #a6d5fa; */ }\n\n.lv-component-overlay {\n  background-color: rgba(0, 0, 0, 0.4);\n  transition-duration: 0.2s; }\n\n.lv-dialog-mask {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  pointer-events: none;\n  background-color: transparent;\n  transition-property: background-color;\n  z-index: 1000; }\n\n.lv-dialog-mask.lv-component-overlay {\n  pointer-events: auto; }\n\n.lv-dialog {\n  display: flex;\n  flex-direction: column;\n  pointer-events: auto;\n  max-height: 90%;\n  transform: scale(1); }\n\n.lv-dialog-content {\n  overflow-y: auto; }\n\n.lv-dialog-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between; }\n\n.lv-dialog-title {\n  list-style: 1; }\n\n.lv-dialog .lv-dialog-header-icons {\n  display: flex;\n  align-items: center; }\n\n.lv-dialog .lv-dialog-header-icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  position: relative; }\n\n/* Fluid */\n.lv-fluid .lv-dialog-footer .lv-button {\n  width: auto; }\n\n/* Animation */\n/* Center */\n.lv-dialog-enter-active {\n  transition: all 150ms cubic-bezier(0, 0, 0.2, 1); }\n\n.lv-dialog-leave-active {\n  transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1); }\n\n.lv-dialog-enter,\n.lv-dialog-leave-to {\n  opacity: 0;\n  transform: scale(0.7); }\n\n.lv-dialog-mask.lv-dialog-mask-leave {\n  background-color: transparent; }\n\n/* Top, Bottom, Left, Right, Top* and Bottom* */\n.lv-dialog-top .lv-dialog,\n.lv-dialog-bottom .lv-dialog,\n.lv-dialog-left .lv-dialog,\n.lv-dialog-right .lv-dialog,\n.lv-dialog-topleft .lv-dialog,\n.lv-dialog-topright .lv-dialog,\n.lv-dialog-bottomleft .lv-dialog,\n.lv-dialog-bottomright .lv-dialog {\n  margin: 0.75rem;\n  transform: translate3d(0px, 0px, 0px); }\n\n.lv-dialog-top .lv-dialog-enter-active,\n.lv-dialog-top .lv-dialog-leave-active,\n.lv-dialog-bottom .lv-dialog-enter-active,\n.lv-dialog-bottom .lv-dialog-leave-active,\n.lv-dialog-left .lv-dialog-enter-active,\n.lv-dialog-left .lv-dialog-leave-active,\n.lv-dialog-right .lv-dialog-enter-active,\n.lv-dialog-right .lv-dialog-leave-active,\n.lv-dialog-topleft .lv-dialog-enter-active,\n.lv-dialog-topleft .lv-dialog-leave-active,\n.lv-dialog-topright .lv-dialog-enter-active,\n.lv-dialog-topright .lv-dialog-leave-active,\n.lv-dialog-bottomleft .lv-dialog-enter-active,\n.lv-dialog-bottomleft .lv-dialog-leave-active,\n.lv-dialog-bottomright .lv-dialog-enter-active,\n.lv-dialog-bottomright .lv-dialog-leave-active {\n  transition: all 0.3s ease-out; }\n\n.lv-dialog-top .lv-dialog-enter,\n.lv-dialog-top .lv-dialog-leave-to {\n  transform: translate3d(0px, -100%, 0px); }\n\n.lv-dialog-bottom .lv-dialog-enter,\n.lv-dialog-bottom .lv-dialog-leave-to {\n  transform: translate3d(0px, 100%, 0px); }\n\n.lv-dialog-left .lv-dialog-enter,\n.lv-dialog-left .lv-dialog-leave-to,\n.lv-dialog-topleft .lv-dialog-enter,\n.lv-dialog-topleft .lv-dialog-leave-to,\n.lv-dialog-bottomleft .lv-dialog-enter,\n.lv-dialog-bottomleft .lv-dialog-leave-to {\n  transform: translate3d(-100%, 0px, 0px); }\n\n.lv-dialog-right .lv-dialog-enter,\n.lv-dialog-right .lv-dialog-leave-to,\n.lv-dialog-topright .lv-dialog-enter,\n.lv-dialog-topright .lv-dialog-leave-to,\n.lv-dialog-bottomright .lv-dialog-enter,\n.lv-dialog-bottomright .lv-dialog-leave-to {\n  transform: translate3d(100%, 0px, 0px); }\n\n/* Maximize */\n.lv-dialog-maximized {\n  -webkit-transition: none;\n  transition: none;\n  transform: none;\n  width: 100vw !important;\n  max-height: 100%;\n  height: 100%; }\n\n.lv-dialog-maximized .lv-dialog-content {\n  flex-grow: 1; }\n\n/* Position */\n.lv-dialog-left {\n  justify-content: flex-start; }\n\n.lv-dialog-right {\n  justify-content: flex-end; }\n\n.lv-dialog-top {\n  align-items: flex-start; }\n\n.lv-dialog-topleft {\n  justify-content: flex-start;\n  align-items: flex-start; }\n\n.lv-dialog-topright {\n  justify-content: flex-end;\n  align-items: flex-start; }\n\n.lv-dialog-bottom {\n  align-items: flex-end; }\n\n.lv-dialog-bottomleft {\n  justify-content: flex-start;\n  align-items: flex-end; }\n\n.lv-dialog-bottomright {\n  justify-content: flex-end;\n  align-items: flex-end; }\n"),x.render=function(e,l,t,o,n,x){const L=i("LvButton"),$=a("ripple");return n.maskVisible?(d(),s("div",{key:0,ref:"mask",class:x.maskClass,onClick:l[2]||(l[2]=e=>t.closable?x.close():"")},[r(v,{name:"lv-dialog",onBeforeEnter:x.onBeforeEnter,onEnter:x.onEnter,onBeforeLeave:x.onBeforeLeave,onLeave:x.onLeave,onAfterLeave:x.onAfterLeave,onAppear:x.onAppear},{default:g((()=>[e.modelValue?(d(),s("div",m({key:0,ref:"dialog",class:x.dialogClass,style:x.dialogStyle},e.$attrs,c(x.listeners),{role:"dialog","aria-labelledby":x.ariaLabelledById,"aria-modal":t.modal,onClick:l[1]||(l[1]=h((()=>{}),["stop"]))}),[t.showHeader?(d(),s("div",k,[f(e.$slots,"header",{},(()=>[t.header?(d(),s("span",{key:0,id:x.ariaLabelledById,class:"lv-dialog-title"},u(t.header),9,["id"])):p("",!0)])),r("div",w,[t.maximizable?b((d(),s(L,{key:0,class:"lv-dialog-header-icon lv-dialog-header-maximize lv-link",onClick:x.maximize,type:"button",tabindex:"-1"},{default:g((()=>[r("span",{class:x.maximizeIconClass},null,2)])),_:1},8,["onClick"])),[[$]]):p("",!0),t.closable?b((d(),s(L,{key:1,class:"lv-dialog-header-icon lv-dialog-header-close lv-link",onClick:x.close,"aria-label":t.ariaCloseLabel,type:"button",tabindex:"-1"},{default:g((()=>[C])),_:1},8,["onClick","aria-label"])),[[$]]):p("",!0)])])):p("",!0),r("div",{class:"lv-dialog-content",style:t.contentStyle},[f(e.$slots,"default")],4),t.footer||e.$slots.footer?(d(),s("div",z,[f(e.$slots,"footer",{},(()=>[y(u(t.footer),1)]))])):p("",!0)],16,["aria-labelledby","aria-modal"])):p("",!0)])),_:1},8,["onBeforeEnter","onEnter","onBeforeLeave","onLeave","onAfterLeave","onAppear"])],2)):p("",!0)};export default x;
