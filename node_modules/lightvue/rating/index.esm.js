import{openBlock as t,createBlock as e,createVNode as r,withDirectives as i,vShow as o,createCommentVNode as n,resolveComponent as a,Fragment as s,renderList as l,toDisplayString as d}from"vue";var g={name:"Star",props:{fill:{type:Number,default:0},points:{type:Array,default:()=>[]},size:{type:Number,default:50},starId:{type:Number,required:!0},activeColor:{type:String,required:!0},inactiveColor:{type:String,required:!0},borderColor:{type:String,default:"#000"},borderWidth:{type:Number,default:0},roundedCorners:{type:Boolean,default:!1},rtl:{type:Boolean,default:!1},glow:{type:Number,default:0},glowColor:{type:String,default:null,required:!1}},emits:["star-mouse-move","star-selected"],data:()=>({starPoints:[19.8,2.2,6.6,43.56,39.6,17.16,0,17.16,33,43.56],grad:"",glowId:""}),computed:{starPointsToString(){return this.starPoints.join(",")},gradId(){return"url(#"+this.grad+")"},starSize(){const t=this.roundedCorners&&this.borderWidth<=0?parseInt(this.size)-parseInt(this.border):this.size;return parseInt(t)+parseInt(this.border)},starFill(){return this.rtl?100-this.fill+"%":this.fill+"%"},border(){return this.roundedCorners&&this.borderWidth<=0?6:this.borderWidth},getBorderColor(){return this.roundedCorners&&this.borderWidth<=0?this.fill<=0?this.inactiveColor:this.activeColor:this.borderColor},maxSize(){return this.starPoints.reduce((function(t,e){return Math.max(t,e)}))},viewBox(){return"0 0 "+this.maxSize+" "+this.maxSize}},created(){this.starPoints=this.points.length?this.points:this.starPoints,this.calculatePoints(),this.grad=this.getRandomId(),this.glowId=this.getRandomId()},methods:{mouseMoving(t){this.$emit("star-mouse-move",{event:t,position:this.getPosition(t),id:this.starId})},getPosition(t){var e=.92*this.size;const r=this.rtl?Math.min(t.offsetX,45):Math.max(t.offsetX,1);var i=Math.round(100/e*r);return Math.min(i,100)},selected(t){this.$emit("star-selected",{id:this.starId,position:this.getPosition(t)})},getRandomId:()=>Math.random().toString(36).substring(7),calculatePoints(){this.starPoints=this.starPoints.map((t=>this.size/this.maxSize*t+1.5*this.border))},parseAlphaColor(t){const e=[{pattern:/^rgba\((\d{1,3}%?\s*,\s*){3}(\d*(?:\.\d+)?)\)$/,getColor:t=>t.replace(/,(?!.*,).*(?=\))|a/g,""),getOpacity:t=>t.match(/\.\d+|[01](?=\))/)[0]},{pattern:/^hsla\(\d+\s*,\s*([\d.]+%\s*,\s*){2}(\d*(?:\.\d+)?)\)$/,getColor:t=>t.replace(/,(?!.*,).*(?=\))|a/g,""),getOpacity:t=>t.match(/\.\d+|[01](?=\))/)[0]},{pattern:/^#([0-9A-Fa-f]{4}|[0-9A-Fa-f]{8})$/,getColor:t=>5===t.length?t.substring(0,4):t.substring(0,7),getOpacity:t=>5===t.length?(parseInt(t.substring(4,5)+t.substring(4,5),16)/255).toFixed(2):(parseInt(t.substring(7,9),16)/255).toFixed(2)},{pattern:/^transparent$/,getColor:()=>"#fff",getOpacity:()=>"0"}];for(let r=0;r<e.length;r++)if(e[r].pattern.test(t))return{color:e[r].getColor(t),opacity:e[r].getOpacity(t)};return{color:t,opacity:"1"}},getColor(t){return this.parseAlphaColor(t).color},getOpacity(t){return this.parseAlphaColor(t).opacity}}};const h=r("feMerge",null,[r("feMergeNode",{in:"coloredBlur"}),r("feMergeNode",{in:"SourceGraphic"})],-1);function u(t,e){void 0===e&&(e={});var r=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}u("\n.lv-rating__star-svg {\n        overflow: visible !important;\n}\n"),g.render=function(a,s,l,d,g,u){return t(),e("svg",{class:"lv-rating__star-svg",height:u.starSize,width:u.starSize,viewBox:u.viewBox,onMousemove:s[1]||(s[1]=(...t)=>u.mouseMoving&&u.mouseMoving(...t)),onClick:s[2]||(s[2]=(...t)=>u.selected&&u.selected(...t))},[r("linearGradient",{id:g.grad,x1:"0",x2:"100%",y1:"0",y2:"0"},[r("stop",{offset:u.starFill,"stop-color":l.rtl?u.getColor(l.inactiveColor):u.getColor(l.activeColor),"stop-opacity":l.rtl?u.getOpacity(l.inactiveColor):u.getOpacity(l.activeColor)},null,8,["offset","stop-color","stop-opacity"]),r("stop",{offset:u.starFill,"stop-color":l.rtl?u.getColor(l.activeColor):u.getColor(l.inactiveColor),"stop-opacity":l.rtl?u.getOpacity(l.activeColor):u.getOpacity(l.inactiveColor)},null,8,["offset","stop-color","stop-opacity"])],8,["id"]),r("filter",{id:g.glowId,height:"130%",width:"130%",filterUnits:"userSpaceOnUse"},[r("feGaussianBlur",{stdDeviation:l.glow,result:"coloredBlur"},null,8,["stdDeviation"]),h],8,["id"]),l.glowColor?i((t(),e("polygon",{key:0,points:u.starPointsToString,fill:u.gradId,stroke:l.glowColor,filter:"url(#"+g.glowId+")"},null,8,["points","fill","stroke","filter"])),[[o,l.fill>1]]):n("",!0),r("polygon",{points:u.starPointsToString,fill:u.gradId,stroke:u.getBorderColor,"stroke-width":u.border,"stroke-linejoin":l.roundedCorners?"round":"miter"},null,8,["points","fill","stroke","stroke-width","stroke-linejoin"]),r("polygon",{points:u.starPointsToString,fill:u.gradId},null,8,["points","fill"])],40,["height","width","viewBox"])};var c={name:"LvRating",components:{Star:g},props:{increment:{type:Number,default:1},rating:{type:Number,default:0},roundStartRating:{type:Boolean,default:!0},activeColor:{type:String,default:"#38b2ac"},inactiveColor:{type:String,default:"#d8d8d8"},maxRating:{type:Number,default:5},starPoints:{type:Array,default:()=>[]},starSize:{type:Number,default:50},showRating:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1},textClass:{type:String,default:""},inline:{type:Boolean,default:!1},borderColor:{type:String,default:"#999"},borderWidth:{type:Number,default:0},roundedCorners:{type:Boolean,default:!1},padding:{type:Number,default:0},rtl:{type:Boolean,default:!1},fixedPoints:{type:Number,default:null},glow:{type:Number,default:0},glowColor:{type:String,default:"#39b1ac"},clearable:{type:Boolean,default:!1}},emits:["update:modelValue","hover:rating"],data:()=>({step:0,fillLevel:[],currentRating:0,selectedRating:0,ratingSelected:!1}),computed:{formattedRating(){return null===this.fixedPoints?this.currentRating:this.currentRating.toFixed(this.fixedPoints)},shouldRound(){return this.ratingSelected||this.roundStartRating},margin(){return this.padding+this.borderWidth}},watch:{rating(t){this.currentRating=t,this.selectedRating=t,this.createStars(this.shouldRound)},maxRating(t){this.currentRating=t<this.selectedRating?t:this.selectedRating}},created(){this.step=100*this.increment,this.currentRating=this.rating,this.selectedRating=this.currentRating,this.createStars(this.roundStartRating)},methods:{setRating(t,e){if(!this.readOnly){const r=this.rtl?(100-t.position)/100:t.position/100;this.currentRating=(t.id+r-1).toFixed(2),this.currentRating=this.currentRating>this.maxRating?this.maxRating:this.currentRating,this.createStars(),e?(this.clearable&&this.currentRating===this.selectedRating?this.selectedRating=0:this.selectedRating=this.currentRating,this.$emit("update:rating",this.selectedRating),this.ratingSelected=!0):this.$emit("hover:rating",this.currentRating)}},resetRating(){this.readOnly||(this.currentRating=this.selectedRating,this.createStars(this.shouldRound))},createStars(t=!0){t&&this.round();for(var e=0;e<this.maxRating;e++){let t=0;e<this.currentRating&&(t=this.currentRating-e>1?100:100*(this.currentRating-e)),this.fillLevel[e]=Math.round(t)}},round(){var t=1/this.increment;this.currentRating=Math.min(this.maxRating,Math.ceil(this.currentRating*t)/t)}}};u(".lv-rating {\n  display: flex;\n  align-items: center; }\n  .lv-rating.--inline {\n    display: inline-flex; }\n  .lv-rating.--rtl {\n    direction: rtl; }\n    .lv-rating.--rtl .lv-rating__value {\n      margin-right: 10px;\n      direction: rtl; }\n  .lv-rating .lv-rating__star {\n    display: inline-block;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n    -webkit-tap-highlight-color: transparent;\n    cursor: pointer; }\n    .lv-rating .lv-rating__star.--read-only {\n      cursor: initial; }\n  .lv-rating .lv-rating__value {\n    margin-top: 7px;\n    margin-left: 7px; }\n"),c.render=function(i,o,g,h,u,c){const p=a("star");return t(),e("div",{class:["lv-rating",{"--rtl":g.rtl},{"--inline":g.inline}]},[r("div",{class:"lv-rating",onMouseleave:o[2]||(o[2]=(...t)=>c.resetRating&&c.resetRating(...t))},[(t(!0),e(s,null,l(g.maxRating,(i=>(t(),e("span",{key:i,class:[{"--read-only":g.readOnly},"lv-rating__star"],style:{"margin-right":c.margin+"px"}},[r(p,{key:u.currentRating,fill:u.fillLevel[i-1],size:g.starSize,points:g.starPoints,"star-id":i,step:u.step,"active-color":g.activeColor,"inactive-color":g.inactiveColor,"border-color":g.borderColor,"border-width":g.borderWidth,"rounded-corners":g.roundedCorners,rtl:g.rtl,glow:g.glow,"glow-color":g.glowColor,onStarSelected:o[1]||(o[1]=t=>c.setRating(t,!0)),onStarMouseMove:c.setRating},null,8,["fill","size","points","star-id","step","active-color","inactive-color","border-color","border-width","rounded-corners","rtl","glow","glow-color","onStarMouseMove"])],6)))),128)),g.showRating?(t(),e("span",{key:0,class:["lv-rating__value",g.textClass]},d(c.formattedRating),3)):n("",!0)],32)],2)};export default c;
