import{pubSub as e,DomHandler as t}from"lightvue/utils";import s from"lightvue/ripple";const o=e();function a(e,t,s,o,a,n,i,r,l,m){"boolean"!=typeof i&&(l=r,r=i,i=!1);const d="function"==typeof s?s.options:s;let c;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,a&&(d.functional=!0)),o&&(d._scopeId=o),n?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(n)},d._ssrRegister=c):t&&(c=i?function(e){t.call(this,m(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,r(e))}),c)if(d.functional){const e=d.render;d.render=function(t,s){return c.call(s),e(t,s)}}else{const e=d.beforeCreate;d.beforeCreate=e?[].concat(e,c):[c]}return s}var n=0,i={props:{group:{type:String,default:null},position:{type:String,default:"top"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0}},data:()=>({messages:[]}),mounted(){o.$on("add",(e=>{e.position||(e.position="top"),this.position==e.position&&this.add(e)})),o.$on("remove-group",(e=>{e||(e="top"),this.position===e&&(this.messages=[])})),o.$on("remove-all-groups",(()=>{this.messages=[]})),this.updateZIndex()},beforeUpdate(){this.updateZIndex()},methods:{add(e){null==e.id&&(e.id=n++),this.messages=[...this.messages,e]},remove(e){let t=-1;for(let s=0;s<this.messages.length;s++)if(this.messages[s]===e){t=s;break}this.messages.splice(t,1)},updateZIndex(){this.autoZIndex&&(this.$refs.container.style.zIndex=String(this.baseZIndex+t.generateZIndex()))}},components:{ToastMessage:a({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:e.containerClass,attrs:{role:"alert","aria-live":"assertive","aria-atomic":"true"}},[s("div",{staticClass:"lv-toast__message-content"},[s("div",{staticClass:"lv-toast__content"},[e._v(e._s(e.message.content))])])])},staticRenderFns:[]},undefined,{props:{message:null},closeTimeout:null,mounted(){this.message.duration&&(this.closeTimeout=setTimeout((()=>{this.close()}),this.message.duration))},methods:{close(){this.$emit("close",this.message)},onCloseClick(){this.closeTimeout&&clearTimeout(this.closeTimeout),this.close()}},computed:{containerClass(){return["lv-toast__message",{"--info":"info"===this.message.type,"--warn":"warn"===this.message.type,"--error":"error"===this.message.type,"--success":"success"===this.message.type}]}},directives:{ripple:s}},undefined,false,undefined,!1,void 0,void 0,void 0)},computed:{containerClass(){return"lv-toast lv-component --"+this.position}}};const r="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function l(e){return(e,t)=>function(e,t){const s=r?t.media||"default":e,o=d[s]||(d[s]={ids:new Set,styles:[]});if(!o.ids.has(e)){o.ids.add(e);let s=t.source;if(t.map&&(s+="\n/*# sourceURL="+t.map.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),o.element||(o.element=document.createElement("style"),o.element.type="text/css",t.media&&o.element.setAttribute("media",t.media),void 0===m&&(m=document.head||document.getElementsByTagName("head")[0]),m.appendChild(o.element)),"styleSheet"in o.element)o.styles.push(s),o.element.styleSheet.cssText=o.styles.filter(Boolean).join("\n");else{const e=o.ids.size-1,t=document.createTextNode(s),a=o.element.childNodes;a[e]&&o.element.removeChild(a[e]),a.length?o.element.insertBefore(t,a[e]):o.element.appendChild(t)}}}(e,t)}let m;const d={};const c=a({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",class:e.containerClass},[s("transition-group",{attrs:{name:"lv-toast__message",tag:"div"}},e._l(e.messages,(function(t){return s("ToastMessage",{key:t.id,attrs:{message:t},on:{close:function(t){return e.remove(t)}}})})),1)],1)},staticRenderFns:[]},(function(e){e&&e("data-v-47c4280e_0",{source:".lv-toast .lv-toast__message{margin:0 0 1rem 0;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);border-radius:25px;background:#38b2ac}.lv-toast .lv-toast__message .lv-toast__message-content{padding:1rem;border-width:0;text-align:center;color:#fff!important;width:100%}.lv-toast .lv-toast__message .lv-toast__message-content .lv-toast__message-text{color:#fff!important}.lv-toast .lv-toast__message.--info{background:#3298dc}.lv-toast .lv-toast__message.--success{background:#48c774}.lv-toast .lv-toast__message.--warn{background:#f4c430}.lv-toast .lv-toast__message.--error{background:#bb2727}.lv-toast{position:fixed;min-width:15rem;font-size:18px}.lv-toast.--top{top:20px;left:50%;transform:translateX(-50%)}.lv-toast.--bottom{bottom:20px;left:50%;transform:translateX(-50%)}.lv-toast.--center{top:50%;left:50%;transform:translate(-50%,-50%)}.lv-toast__message-text{flex:1 1 auto}.lv-toast__icon-close.lv-link{cursor:pointer}.lv-toast__message-enter,.lv-toast__message-enter-from{opacity:0;-webkit-transform:translateY(50%);-ms-transform:translateY(50%);transform:translateY(50%)}.lv-toast__message-enter-active{-webkit-transition:transform .3s,opacity .3s;transition:transform .3s,opacity .3s}.lv-toast__message-leave,.lv-toast__message-leave-from{max-height:1000px}.lv-toast__message-leave-active{-webkit-transition:max-height .45s cubic-bezier(0,1,0,1),opacity .3s,margin-bottom .3s;transition:max-height .45s cubic-bezier(0,1,0,1),opacity .3s,margin-bottom .3s}.lv-toast__message-leave-to{max-height:0;opacity:0;margin-bottom:0;overflow:hidden}",map:void 0,media:void 0})}),i,undefined,false,undefined,!1,l,void 0,void 0),p={install:e=>{const t={add:e=>{o.$emit("add",e)},removeGroup:e=>{o.$emit("remove-group",e)},removeAllGroups:()=>{o.$emit("remove-all-groups")}};e.prototype?e.prototype.$toast=t:e.config.globalProperties.$toast=t,e.component("LvToast",c)}};export default p;
