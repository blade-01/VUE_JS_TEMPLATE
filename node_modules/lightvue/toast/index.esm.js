import{pubSub as t,DomHandler as e}from"lightvue/utils";import s from"lightvue/ripple";import{openBlock as n,createBlock as o,createVNode as a,toDisplayString as i,resolveComponent as r,TransitionGroup as l,withCtx as m,Fragment as c,renderList as p}from"vue";const d=t();var g={props:{message:null},closeTimeout:null,mounted(){this.message.duration&&(this.closeTimeout=setTimeout((()=>{this.close()}),this.message.duration))},methods:{close(){this.$emit("close",this.message)},onCloseClick(){this.closeTimeout&&clearTimeout(this.closeTimeout),this.close()}},computed:{containerClass(){return["lv-toast__message",{"--info":"info"===this.message.type,"--warn":"warn"===this.message.type,"--error":"error"===this.message.type,"--success":"success"===this.message.type}]}},directives:{ripple:s}};const v={class:"lv-toast__message-content"},u={class:"lv-toast__content"};g.render=function(t,e,s,r,l,m){return n(),o("div",{class:m.containerClass,role:"alert","aria-live":"assertive","aria-atomic":"true"},[a("div",v,[a("div",u,i(s.message.content),1)])],2)};var h=0,f={props:{group:{type:String,default:null},position:{type:String,default:"top"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0}},data:()=>({messages:[]}),mounted(){d.$on("add",(t=>{t.position||(t.position="top"),this.position==t.position&&this.add(t)})),d.$on("remove-group",(t=>{t||(t="top"),this.position===t&&(this.messages=[])})),d.$on("remove-all-groups",(()=>{this.messages=[]})),this.updateZIndex()},beforeUpdate(){this.updateZIndex()},methods:{add(t){null==t.id&&(t.id=h++),this.messages=[...this.messages,t]},remove(t){let e=-1;for(let s=0;s<this.messages.length;s++)if(this.messages[s]===t){e=s;break}this.messages.splice(e,1)},updateZIndex(){this.autoZIndex&&(this.$refs.container.style.zIndex=String(this.baseZIndex+e.generateZIndex()))}},components:{ToastMessage:g},computed:{containerClass(){return"lv-toast lv-component --"+this.position}}};!function(t,e){void 0===e&&(e={});var s=e.insertAt;if(t&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===s&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".lv-toast .lv-toast__message {\n  margin: 0 0 1rem 0;\n  box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);\n  border-radius: 25px;\n  background: #38b2ac; }\n  .lv-toast .lv-toast__message .lv-toast__message-content {\n    padding: 1rem;\n    border-width: 0 0 0 0;\n    text-align: center;\n    color: white !important;\n    width: 100%; }\n    .lv-toast .lv-toast__message .lv-toast__message-content .lv-toast__message-text {\n      color: white !important; }\n  .lv-toast .lv-toast__message.--info {\n    background: #3298dc; }\n  .lv-toast .lv-toast__message.--success {\n    background: #48c774; }\n  .lv-toast .lv-toast__message.--warn {\n    background: #f4c430; }\n  .lv-toast .lv-toast__message.--error {\n    background: #bb2727; }\n\n.lv-toast {\n  position: fixed;\n  min-width: 15rem;\n  font-size: 18px; }\n  .lv-toast.--top {\n    top: 20px;\n    left: 50%;\n    transform: translateX(-50%);\n    /* margin-left: -10em; */ }\n  .lv-toast.--bottom {\n    bottom: 20px;\n    left: 50%;\n    transform: translateX(-50%);\n    /* margin-left: -10em;` */ }\n  .lv-toast.--center {\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    /* margin-left: -10em;` */ }\n\n.lv-toast__message-text {\n  flex: 1 1 auto; }\n\n.lv-toast__icon-close.lv-link {\n  cursor: pointer; }\n\n/* Animations */\n.lv-toast__message-enter,\n.lv-toast__message-enter-from {\n  opacity: 0;\n  -webkit-transform: translateY(50%);\n  -ms-transform: translateY(50%);\n  transform: translateY(50%); }\n\n.lv-toast__message-enter-active {\n  -webkit-transition: transform 0.3s, opacity 0.3s;\n  transition: transform 0.3s, opacity 0.3s; }\n\n.lv-toast__message-leave,\n.lv-toast__message-leave-from {\n  max-height: 1000px; }\n\n.lv-toast__message-leave-active {\n  -webkit-transition: max-height 0.45s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin-bottom 0.3s;\n  transition: max-height 0.45s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin-bottom 0.3s; }\n\n.lv-toast__message-leave-to {\n  max-height: 0;\n  opacity: 0;\n  margin-bottom: 0;\n  overflow: hidden; }\n"),f.render=function(t,e,s,i,d,g){const v=r("ToastMessage");return n(),o("div",{ref:"container",class:g.containerClass},[a(l,{name:"lv-toast__message",tag:"div"},{default:m((()=>[(n(!0),o(c,null,p(d.messages,(t=>(n(),o(v,{key:t.id,message:t,onClose:e[1]||(e[1]=t=>g.remove(t))},null,8,["message"])))),128))])),_:1})],2)};const _={install:t=>{const e={add:t=>{d.$emit("add",t)},removeGroup:t=>{d.$emit("remove-group",t)},removeAllGroups:()=>{d.$emit("remove-all-groups")}};t.prototype?t.prototype.$toast=e:t.config.globalProperties.$toast=e,t.component("LvToast",f)}};export default _;
