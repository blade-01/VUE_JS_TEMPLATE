"use strict";var e=require("lightvue/utils"),t=require("lightvue/ripple"),s=require("vue");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=o(t);const a=e.pubSub();var r={props:{message:null},closeTimeout:null,mounted(){this.message.duration&&(this.closeTimeout=setTimeout((()=>{this.close()}),this.message.duration))},methods:{close(){this.$emit("close",this.message)},onCloseClick(){this.closeTimeout&&clearTimeout(this.closeTimeout),this.close()}},computed:{containerClass(){return["lv-toast__message",{"--info":"info"===this.message.type,"--warn":"warn"===this.message.type,"--error":"error"===this.message.type,"--success":"success"===this.message.type}]}},directives:{ripple:n.default}};const i={class:"lv-toast__message-content"},l={class:"lv-toast__content"};r.render=function(e,t,o,n,a,r){return s.openBlock(),s.createBlock("div",{class:r.containerClass,role:"alert","aria-live":"assertive","aria-atomic":"true"},[s.createVNode("div",i,[s.createVNode("div",l,s.toDisplayString(o.message.content),1)])],2)};var m=0,c={props:{group:{type:String,default:null},position:{type:String,default:"top"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0}},data:()=>({messages:[]}),mounted(){a.$on("add",(e=>{e.position||(e.position="top"),this.position==e.position&&this.add(e)})),a.$on("remove-group",(e=>{e||(e="top"),this.position===e&&(this.messages=[])})),a.$on("remove-all-groups",(()=>{this.messages=[]})),this.updateZIndex()},beforeUpdate(){this.updateZIndex()},methods:{add(e){null==e.id&&(e.id=m++),this.messages=[...this.messages,e]},remove(e){let t=-1;for(let s=0;s<this.messages.length;s++)if(this.messages[s]===e){t=s;break}this.messages.splice(t,1)},updateZIndex(){this.autoZIndex&&(this.$refs.container.style.zIndex=String(this.baseZIndex+e.DomHandler.generateZIndex()))}},components:{ToastMessage:r},computed:{containerClass(){return"lv-toast lv-component --"+this.position}}};!function(e,t){void 0===t&&(t={});var s=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===s&&o.firstChild?o.insertBefore(n,o.firstChild):o.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(".lv-toast .lv-toast__message {\n  margin: 0 0 1rem 0;\n  box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);\n  border-radius: 25px;\n  background: #38b2ac; }\n  .lv-toast .lv-toast__message .lv-toast__message-content {\n    padding: 1rem;\n    border-width: 0 0 0 0;\n    text-align: center;\n    color: white !important;\n    width: 100%; }\n    .lv-toast .lv-toast__message .lv-toast__message-content .lv-toast__message-text {\n      color: white !important; }\n  .lv-toast .lv-toast__message.--info {\n    background: #3298dc; }\n  .lv-toast .lv-toast__message.--success {\n    background: #48c774; }\n  .lv-toast .lv-toast__message.--warn {\n    background: #f4c430; }\n  .lv-toast .lv-toast__message.--error {\n    background: #bb2727; }\n\n.lv-toast {\n  position: fixed;\n  min-width: 15rem;\n  font-size: 18px; }\n  .lv-toast.--top {\n    top: 20px;\n    left: 50%;\n    transform: translateX(-50%);\n    /* margin-left: -10em; */ }\n  .lv-toast.--bottom {\n    bottom: 20px;\n    left: 50%;\n    transform: translateX(-50%);\n    /* margin-left: -10em;` */ }\n  .lv-toast.--center {\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    /* margin-left: -10em;` */ }\n\n.lv-toast__message-text {\n  flex: 1 1 auto; }\n\n.lv-toast__icon-close.lv-link {\n  cursor: pointer; }\n\n/* Animations */\n.lv-toast__message-enter,\n.lv-toast__message-enter-from {\n  opacity: 0;\n  -webkit-transform: translateY(50%);\n  -ms-transform: translateY(50%);\n  transform: translateY(50%); }\n\n.lv-toast__message-enter-active {\n  -webkit-transition: transform 0.3s, opacity 0.3s;\n  transition: transform 0.3s, opacity 0.3s; }\n\n.lv-toast__message-leave,\n.lv-toast__message-leave-from {\n  max-height: 1000px; }\n\n.lv-toast__message-leave-active {\n  -webkit-transition: max-height 0.45s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin-bottom 0.3s;\n  transition: max-height 0.45s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin-bottom 0.3s; }\n\n.lv-toast__message-leave-to {\n  max-height: 0;\n  opacity: 0;\n  margin-bottom: 0;\n  overflow: hidden; }\n"),c.render=function(e,t,o,n,a,r){const i=s.resolveComponent("ToastMessage");return s.openBlock(),s.createBlock("div",{ref:"container",class:r.containerClass},[s.createVNode(s.TransitionGroup,{name:"lv-toast__message",tag:"div"},{default:s.withCtx((()=>[(s.openBlock(!0),s.createBlock(s.Fragment,null,s.renderList(a.messages,(e=>(s.openBlock(),s.createBlock(i,{key:e.id,message:e,onClose:t[1]||(t[1]=e=>r.remove(e))},null,8,["message"])))),128))])),_:1})],2)};const d={install:e=>{const t={add:e=>{a.$emit("add",e)},removeGroup:e=>{a.$emit("remove-group",e)},removeAllGroups:()=>{a.$emit("remove-all-groups")}};e.prototype?e.prototype.$toast=t:e.config.globalProperties.$toast=t,e.component("LvToast",c)}};module.exports=d;
