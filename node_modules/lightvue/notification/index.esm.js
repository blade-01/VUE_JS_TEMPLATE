import{pubSub as n,DomHandler as i}from"lightvue/utils";import t from"lightvue/ripple";import{resolveDirective as o,openBlock as e,createBlock as s,createVNode as a,toDisplayString as c,withDirectives as l,createCommentVNode as r,resolveComponent as m,TransitionGroup as f,withCtx as g,Fragment as v,renderList as p}from"vue";const _=n();var d={props:{message:null},closeTimeout:null,mounted(){this.message.duration&&(this.closeTimeout=setTimeout((()=>{this.close()}),this.message.duration))},methods:{close(){this.$emit("close",this.message)},onCloseClick(){this.closeTimeout&&clearTimeout(this.closeTimeout),this.close()}},computed:{containerClass(){return["lv-notification__message",{"--info":"info"===this.message.type,"--warn":"warn"===this.message.type,"--error":"error"===this.message.type,"--success":"success"===this.message.type}]},iconClass(){return["lv-notification__message-icon",{"light-icon-info-circle":"info"===this.message.type,"light-icon-alert-triangle":"warn"===this.message.type,"light-icon-circle-x":"error"===this.message.type,"light-icon-circle-check":"success"===this.message.type}]}},directives:{ripple:t}};const h={class:"lv-notification__message-content"},u={class:"lv-notification__message-text"},x={class:"lv-notification__title"},b={class:"lv-notification__content"},y=a("span",{class:"lv-notification__icon-close-icon light-icon-x"},null,-1);d.render=function(n,i,t,m,f,g){const v=o("ripple");return e(),s("div",{class:g.containerClass,role:"alert","aria-live":"assertive","aria-atomic":"true"},[a("div",h,[a("span",{class:g.iconClass},null,2),a("div",u,[a("span",x,c(t.message.title),1),a("div",b,c(t.message.content),1)]),!1!==t.message.closable?l((e(),s("button",{key:0,class:"lv-notification__icon-close lv-link",onClick:i[1]||(i[1]=(...n)=>g.onCloseClick&&g.onCloseClick(...n)),type:"button"},[y],512)),[[v]]):r("",!0)])],2)};var w=0,k={props:{group:{type:String,default:null},position:{type:String,default:"top-right"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0}},data:()=>({messages:[]}),mounted(){_.$on("add",(n=>{n.position||(n.position="top-right"),this.position==n.position&&this.add(n)})),_.$on("remove-group",(n=>{message.position||(message.position="top-right"),this.position===n&&(this.messages=[])})),_.$on("remove-all-groups",(()=>{this.messages=[]})),this.updateZIndex()},beforeUpdate(){this.updateZIndex()},methods:{add(n){null==n.id&&(n.id=w++),this.messages=[...this.messages,n]},remove(n){let i=-1;for(let t=0;t<this.messages.length;t++)if(this.messages[t]===n){i=t;break}this.messages.splice(i,1)},updateZIndex(){this.autoZIndex&&(this.$refs.container.style.zIndex=String(this.baseZIndex+i.generateZIndex()))}},components:{NotificationMessage:d},computed:{containerClass(){return"lv-notification lv-component --"+this.position}}};!function(n,i){void 0===i&&(i={});var t=i.insertAt;if(n&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css","top"===t&&o.firstChild?o.insertBefore(e,o.firstChild):o.appendChild(e),e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}}(".lv-notification .lv-notification__icon-close-icon {\n  font-weight: bold;\n  font-size: 18px;\n  color: white !important; }\n\n.lv-notification .lv-notification__message {\n  margin: 0 0 1rem 0;\n  box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);\n  border-radius: 3px;\n  background: #38b2ac; }\n  .lv-notification .lv-notification__message .lv-notification__message-content {\n    padding: 1rem;\n    border-width: 0 0 0 0; }\n    .lv-notification .lv-notification__message .lv-notification__message-content .lv-notification__message-text {\n      margin: 0 0 0 1rem;\n      color: white !important; }\n    .lv-notification .lv-notification__message .lv-notification__message-content .lv-notification__message-icon {\n      font-size: 2.4rem;\n      font-weight: bold;\n      color: inherit;\n      padding: 0px 6px;\n      border-radius: 50%;\n      /* background: white !important; */ }\n    .lv-notification .lv-notification__message .lv-notification__message-content .lv-notification__title {\n      font-weight: 700; }\n    .lv-notification .lv-notification__message .lv-notification__message-content .lv-notification__content {\n      margin: 0.5rem 0 0 0; }\n  .lv-notification .lv-notification__message .lv-notification__icon-close {\n    font-weight: 900;\n    width: 2rem;\n    height: 2rem;\n    border-radius: 50%;\n    border-color: transparent;\n    background-color: rgba(10, 10, 10, 0.2);\n    transition: background-color 0.2s, color 0.2s, box-shadow 0.2s; }\n    .lv-notification .lv-notification__message .lv-notification__icon-close:hover {\n      background: rgba(255, 255, 255, 0.3); }\n    .lv-notification .lv-notification__message .lv-notification__icon-close:focus {\n      outline: 0 none;\n      outline-offset: 0; }\n  .lv-notification .lv-notification__message .lv-notification__message-icon,\n  .lv-notification .lv-notification__message .lv-notification__icon-close {\n    color: rgba(255, 255, 255, 0.7) !important; }\n  .lv-notification .lv-notification__message.--info {\n    background: #3298dc; }\n  .lv-notification .lv-notification__message.--success {\n    background: #1ab14f; }\n  .lv-notification .lv-notification__message.--warn {\n    background: #f4c430; }\n  .lv-notification .lv-notification__message.--error {\n    background: #b24444; }\n\n@media only screen and (max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 2) {\n  .lv-notification {\n    width: 18rem !important; }\n    .lv-notification .lv-notification__icon-close-icon {\n      font-size: 15px; }\n    .lv-notification .lv-notification__message {\n      margin: 0 0 0.6rem 0; }\n      .lv-notification .lv-notification__message .lv-notification__message-content {\n        padding: 0.8rem; }\n        .lv-notification .lv-notification__message .lv-notification__message-content .lv-notification__message-icon {\n          font-size: 2.2rem;\n          padding: 0px 5px; }\n        .lv-notification .lv-notification__message .lv-notification__message-content .lv-notification__content {\n          margin: 0.5rem 0 0 0; } }\n\n.lv-notification {\n  position: fixed;\n  width: 25rem; }\n  .lv-notification.--top-right {\n    top: 20px;\n    right: 20px; }\n  .lv-notification.--top-left {\n    top: 20px;\n    left: 20px; }\n  .lv-notification.--bottom-left {\n    bottom: 20px;\n    left: 20px; }\n  .lv-notification.--bottom-right {\n    bottom: 20px;\n    right: 20px; }\n  .lv-notification.--top-center {\n    top: 20px;\n    left: 50%;\n    margin-left: -10em; }\n  .lv-notification.--bottom-center {\n    bottom: 20px;\n    left: 50%;\n    margin-left: -10em; }\n  .lv-notification.--center {\n    left: 50%;\n    top: 50%;\n    min-width: 20vw;\n    transform: translate(-50%, -50%); }\n\n.lv-notification__message-content {\n  display: flex;\n  align-items: flex-start; }\n\n.lv-notification__message-text {\n  flex: 1 1 auto; }\n\n.lv-notification__icon-close {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  position: relative;\n  flex-shrink: 0; }\n  .lv-notification__icon-close.lv-link {\n    cursor: pointer; }\n\n/* Animations */\n.lv-notification__message-enter,\n.lv-notification__message-enter-from {\n  opacity: 0;\n  -webkit-transform: translateY(50%);\n  -ms-transform: translateY(50%);\n  transform: translateY(50%); }\n\n.lv-notification__message-leave,\n.lv-notification__message-leave-from {\n  max-height: 1000px; }\n\n.lv-notification__message-leave-to {\n  max-height: 0;\n  opacity: 0;\n  margin-bottom: 0;\n  overflow: hidden; }\n\n.lv-notification__message-enter-active {\n  -webkit-transition: transform 0.3s, opacity 0.3s;\n  transition: transform 0.3s, opacity 0.3s; }\n\n.lv-notification__message-leave-active {\n  -webkit-transition: max-height 0.45s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin-bottom 0.3s;\n  transition: max-height 0.45s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin-bottom 0.3s; }\n"),k.render=function(n,i,t,o,c,l){const r=m("NotificationMessage");return e(),s("div",{ref:"container",class:l.containerClass},[a(f,{name:"lv-notification__message",tag:"div"},{default:g((()=>[(e(!0),s(v,null,p(c.messages,(n=>(e(),s(r,{key:n.id,message:n,onClose:i[1]||(i[1]=n=>l.remove(n))},null,8,["message"])))),128))])),_:1})],2)};const C={install:n=>{const i={add:n=>{_.$emit("add",n)},removeGroup:n=>{_.$emit("remove-group",n)},removeAllGroups:()=>{_.$emit("remove-all-groups")}};n.prototype?n.prototype.$notification=i:n.config.globalProperties.$notification=i,n.component("LvNotification",k)}};export default C;
