import{DomHandler as e}from"lightvue/utils";import{openBlock as t,createBlock as i,createVNode as n,createCommentVNode as l}from"vue";var a={props:{value:[Number,Array],min:{type:Number,default:0},max:{type:Number,default:100},orientation:{type:String,default:"horizontal"},step:{type:Number,default:null},range:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},ariaLabelledBy:{type:String,default:null},sliderColor:{type:String,default:"#38b2ac"}},dragging:!1,handleIndex:null,initX:null,initY:null,barWidth:null,barHeight:null,dragListener:null,mouseupListener:null,beforeDestroy(){this.unbindDragListeners()},methods:{updateDomData(){let t=this.$refs.container.getBoundingClientRect();this.initX=t.left+e.getWindowScrollLeft(),this.initY=t.top+e.getWindowScrollTop(),this.barWidth=this.$refs.container.offsetWidth,this.barHeight=this.$refs.container.offsetHeight},setValueFromHandlePosition(e,t){let i=(this.max-this.min)*(t/100)+this.min;this.range?this.step?this.handleStepChange(e,i,this.value[this.handleIndex]):this.updateModel(e,i):this.step?this.handleStepChange(e,i,this.value):this.updateModel(e,i)},onSlide(e){let t=this.horizontal?100*(e.pageX-this.initX)/this.barWidth:100*(this.initY+this.barHeight-e.pageY)/this.barHeight;this.setValueFromHandlePosition(e,t)},handleStepChange(e,t,i){let n=t-i,l=i;n<0?l=i+Math.ceil(t/this.step-i/this.step)*this.step:n>0&&(l=i+Math.floor(t/this.step-i/this.step)*this.step),this.updateModel(e,l)},updateModel(e,t){let i,n=t;this.range?(0==this.handleIndex?n<this.min?n=this.min:n>=this.value[1]&&(n=this.value[1]):n>this.max?n=this.max:n<=this.value[0]&&(n=this.value[0]),i=[...this.value],i[this.handleIndex]=Math.floor(n)):(n<this.min?n=this.min:n>this.max&&(n=this.max),i=Math.floor(n)),this.$emit("input",i),this.$emit("change",i)},onBarClick(t){this.disabled||e.hasClass(t.target,"lv-slider-handle")||(this.updateDomData(),this.onSlide(t))},onHandleMouseDown(t,i){this.disabled||(e.addClass(this.$el,"lv-slider-sliding"),this.dragging=!0,this.updateDomData(),this.handleIndex=i,this.bindDragListeners(),t.preventDefault())},onHandleKeyDown(e,t){switch(this.handleIndex=t,e.which){case 40:this.vertical&&(this.decrementValue(e,t),e.preventDefault());break;case 38:this.vertical&&(this.incrementValue(e,t),e.preventDefault());break;case 37:this.horizontal&&(this.decrementValue(e,t),e.preventDefault());break;case 39:this.horizontal&&(this.incrementValue(e,t),e.preventDefault())}},decrementValue(e,t){let i;i=this.range?this.step?this.value[t]-this.step:this.value[t]-1:this.step?this.value-this.step:this.value-1,this.updateModel(e,i),e.preventDefault()},incrementValue(e,t){let i;i=this.range?this.step?this.value[t]+this.step:this.value[t]+1:this.step?this.value+this.step:this.value+1,this.updateModel(e,i),e.preventDefault()},bindDragListeners(){this.dragListener||(this.dragListener=e=>{this.dragging&&this.onSlide(e)},document.addEventListener("mousemove",this.dragListener)),this.mouseupListener||(this.mouseupListener=t=>{this.dragging&&(this.dragging=!1,e.removeClass(this.$el,"lv-slider-sliding"),this.$emit("slideend",{originalEvent:t,values:this.value}))},document.addEventListener("mouseup",this.mouseupListener))},unbindDragListeners(){this.dragListener&&(document.removeEventListener("mousemove",this.dragListener),this.dragListener=null),this.mouseupListener&&(document.removeEventListener("mouseup",this.mouseupListener),this.mouseupListener=null)}},computed:{containerClass(){return["lv-slider lv-component",{"lv-disabled":this.disabled,"lv-slider-horizontal":"horizontal"===this.orientation,"lv-slider-vertical":"vertical"===this.orientation}]},horizontal(){return"horizontal"===this.orientation},vertical(){return"vertical"===this.orientation},rangeStyle(){return this.range?this.horizontal?{left:this.rangeStartPosition+"%",width:this.rangeEndPosition-this.rangeStartPosition+"%",background:this.sliderColor}:{bottom:this.rangeStartPosition+"%",height:this.rangeEndPosition-this.rangeStartHandlePosition+"%",background:this.sliderColor}:this.horizontal?{width:this.handlePosition+"%",background:this.sliderColor}:{height:this.handlePosition+"%",background:this.sliderColor}},handleStyle(){return this.horizontal?{left:this.handlePosition+"%",borderColor:this.sliderColor}:{bottom:this.handlePosition+"%",borderColor:this.sliderColor}},handlePosition(){return 0===this.value||this.value<this.min?0:this.value>this.max?100:100*(this.value-this.min)/(this.max-this.min)},rangeStartPosition(){return this.value?100*(this.value[0]<this.min?0:this.value[0]-this.min)/(this.max-this.min):0},rangeEndPosition(){return this.value?100*(this.value[1]>this.max?100:this.value[1]-this.min)/(this.max-this.min):0},rangeStartHandleStyle(){return this.horizontal?{left:this.rangeStartPosition+"%",borderColor:this.sliderColor}:{bottom:this.rangeStartPosition+"%",borderColor:this.sliderColor}},rangeEndHandleStyle(){return this.horizontal?{left:this.rangeEndPosition+"%",borderColor:this.sliderColor}:{bottom:this.rangeEndPosition+"%",borderColor:this.sliderColor}}}};!function(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===i&&n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}("\n.lv-slider {\n  position: relative;\n  background: #dee2e6;\n  border: 0;\n  border-radius: 3px;\n}\n.lv-slider .lv-slider-handle {\n  cursor: grab;\n  touch-action: none;\n}\n.lv-slider .lv-slider-handle,\n.lv-slider-range {\n  position: absolute;\n  display: block;\n}\n.lv-slider-horizontal .lv-slider-range {\n  top: 0;\n  left: 0;\n  height: 100%;\n}\n.lv-slider-horizontal .lv-slider-handle {\n  top: 50%;\n}\n.lv-slider-vertical {\n  height: 100px;\n}\n.lv-slider-vertical .lv-slider-handle {\n  left: 50%;\n}\n.lv-slider-vertical .lv-slider-range {\n  bottom: 0;\n  left: 0;\n  width: 100%;\n}\n.lv-slider.lv-slider-horizontal {\n  height: 0.286rem;\n}\n.lv-slider.lv-slider-horizontal .lv-slider-handle {\n  margin-top: -0.5715rem;\n  margin-left: -0.5715rem;\n}\n.lv-slider.lv-slider-vertical {\n  width: 0.286rem;\n}\n.lv-slider.lv-slider-vertical .lv-slider-handle {\n  margin-left: -0.5715rem;\n  margin-bottom: -0.5715rem;\n}\n.lv-slider .lv-slider-handle {\n  transform: scale(1);\n  height: 1.143rem;\n  width: 1.143rem;\n  background: #d7efed;\n  border: 2px solid;\n  border-radius: 50%;\n  transition: background-color 0.2s, color 0.2s, border-color 0.2s, box-shadow 0.2s;\n}\n.lv-slider .lv-slider-handle:focus {\n  outline: 0;\n  outline-offset: 0;\n  box-shadow: 0 0 0 0.2rem #c7c7c7;\n}\n.lv-slider:not(.lv-disabled) .lv-slider-handle:hover {\n  /* background: #38b2ac; */\n  transition: all 0.3s;\n  transform: scale(1.2);\n}\n.lv-component {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n  font-size: 1rem;\n  font-weight: 400;\n}\n.lv-component:disabled,\n.lv-disabled {\n  opacity: 0.6;\n}\n"),a.render=function(e,a,s,r,o,d){return t(),i("div",{class:d.containerClass,onClick:a[7]||(a[7]=(...e)=>d.onBarClick&&d.onBarClick(...e)),ref:"container"},[n("span",{class:"lv-slider-range",style:d.rangeStyle},null,4),s.range?l("",!0):(t(),i("span",{key:0,class:"lv-slider-handle",style:d.handleStyle,onMousedown:a[1]||(a[1]=e=>d.onHandleMouseDown(e)),onKeydown:a[2]||(a[2]=e=>d.onHandleKeyDown(e)),tabindex:"0",role:"slider","aria-valuemin":s.min,"aria-valuenow":"value","aria-valuemax":"max","aria-labelledby":s.ariaLabelledBy},null,44,["aria-valuemin","aria-labelledby"])),s.range?(t(),i("span",{key:1,class:"lv-slider-handle",style:d.rangeStartHandleStyle,onMousedown:a[3]||(a[3]=e=>d.onHandleMouseDown(e,0)),onKeydown:a[4]||(a[4]=e=>d.onHandleKeyDown(e,0)),tabindex:"0",role:"slider","aria-valuemin":s.min,"aria-valuenow":"value ? value[0] : null","aria-valuemax":"max","aria-labelledby":s.ariaLabelledBy},null,44,["aria-valuemin","aria-labelledby"])):l("",!0),s.range?(t(),i("span",{key:2,class:"lv-slider-handle",style:d.rangeEndHandleStyle,onMousedown:a[5]||(a[5]=e=>d.onHandleMouseDown(e,1)),onKeydown:a[6]||(a[6]=e=>d.onHandleKeyDown(e,1)),tabindex:"0",role:"slider","aria-valuemin":s.min,"aria-valuenow":"value = value[1] : null","aria-valuemax":"max","aria-labelledby":s.ariaLabelledBy},null,44,["aria-valuemin","aria-labelledby"])):l("",!0)],2)};export default a;
